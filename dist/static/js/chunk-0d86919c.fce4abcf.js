(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d86919c"],{"0233":function(e,t,s){},"0953":function(e,t,s){"use strict";s("0233")},9075:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"add-message"},[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.messageData,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"姓名",prop:"uname"}},[s("el-input",{model:{value:e.messageData.uname,callback:function(t){e.$set(e.messageData,"uname",t)},expression:"messageData.uname"}})],1),s("el-form-item",{attrs:{label:"地址",prop:"addressid"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.messageData.addressid,callback:function(t){e.$set(e.messageData,"addressid",t)},expression:"messageData.addressid"}},e._l(e.addressData,(function(e){return s("el-option",{key:e.addressid,attrs:{label:e.addressname,value:e.addressid}})})),1)],1),s("el-form-item",{attrs:{label:"等级",prop:"levelid"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.messageData.levelid,callback:function(t){e.$set(e.messageData,"levelid",t)},expression:"messageData.levelid"}},e._l(e.levelData,(function(e){return s("el-option",{key:e.jrid,attrs:{label:e.levelname,value:e.jrid}})})),1)],1),s("el-form-item",{attrs:{label:"电话",prop:"tel"}},[s("el-input",{model:{value:e.messageData.tel,callback:function(t){e.$set(e.messageData,"tel",t)},expression:"messageData.tel"}})],1),s("el-form-item",{attrs:{label:"上传头像"}},[s("el-upload",{staticClass:"upload-demo",attrs:{action:"http://39.105.160.25:4000/getMessageA",name:"sfile","on-success":e.successUpload}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件，且不超过500kb ")])],1)],1),s("el-form-item",{attrs:{label:"上传二维码"}},[s("el-upload",{staticClass:"upload-demo",attrs:{action:"http://39.105.160.25:4000/getMessageB",name:"sweixin","on-success":e.successUpload}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件，且不超过500kb ")])],1)],1),s("el-form-item",[e.isUpdate?s("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.updateForm("ruleForm")}}},[e._v("立即修改")]):s("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即添加")]),s("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)},r=[],n=s("5530"),l=s("e91b"),i=s("a4d0"),o=s("c443"),u={data:function(){return{isUpdate:!1,messageData:{uname:"",addressid:"",levelid:"",tel:"",tcoin:"",weixin:""},loading:!1,addressData:[],levelData:[],rules:{uname:[{required:!0,message:"请输入姓名",trigger:"blur"}],tel:[{required:!0,message:"请输入电话",trigger:"blur"}],addressid:[{required:!0,message:"请选择地址",trigger:"change"}],levelid:[{required:!0,message:"请选择等级",trigger:"change"}]}}},methods:{successUpload:function(e){console.log(e),e.headerurl?this.messageData.tcoin=e.headerurl:this.messageData.weixin=e.weixinurl},getLocationList:function(){var e=this;Object(l["c"])().then((function(t){console.log(t),e.addressData=t.data}))},getLevelList:function(){var e=this;Object(i["c"])().then((function(t){console.log(t),e.levelData=t.data}))},submitForm:function(e){var t=this;this.loading=!0,this.$refs[e].validate((function(e){if(!e)return t.loading=!1,console.log("error submit!!"),!1;Object(o["a"])(Object(n["a"])({},t.messageData)).then((function(e){console.log(e),t.loading=!1,t.$message({message:e.message,type:"success"}),t.$router.push("/message/messagelist")}))}))},updateForm:function(e){var t=this;this.loading=!0,this.$refs[e].validate((function(e){if(!e)return t.loading=!1,console.log("error submit!!"),!1;console.log(t.messageData);var s=t.messageData,a=s.uname,r=s.addressid,n=s.tel,l=s.levelid;Object(o["f"])({id:t.$route.query.id,uname:a,addressid:r,tel:n,levelid:l}).then((function(e){console.log(e),t.loading=!1,t.$message({message:"信息修改成功！",type:"success"}),t.$router.push("/message/messagelist")}))}))},showMessage:function(e){var t=this;Object(o["e"])({id:e}).then((function(e){console.log(e);var s=e.data[0];t.messageData={uname:s.jrname,tel:s.jrtel,addressid:s.jraddressesid,levelid:s.jrlevel}}))}},created:function(){if(this.getLocationList(),this.getLevelList(),console.log(this.$route.query.id),this.$route.query.id){this.isUpdate=!0;var e=this.$route.query.id;this.showMessage(e)}}},d=u,c=(s("0953"),s("2877")),m=Object(c["a"])(d,a,r,!1,null,"1c2d5b8f",null);t["default"]=m.exports},a4d0:function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return l}));var a=s("b775");function r(){return Object(a["a"])({url:"/showLevel",method:"get"})}function n(e){return Object(a["a"])({url:"/insertOneLevel",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/delOneLevel",method:"get",params:e})}},c443:function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"d",(function(){return n})),s.d(t,"a",(function(){return l})),s.d(t,"e",(function(){return i})),s.d(t,"f",(function(){return o})),s.d(t,"b",(function(){return u}));var a=s("b775");function r(){return Object(a["a"])({url:"/showMessage",method:"get"})}function n(e){return Object(a["a"])({url:"/searchaddressid",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/insertAllMessage",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/showOneMessage",method:"get",params:e})}function o(e){return Object(a["a"])({url:"/updateMessage",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/delOneMessage",method:"get",params:e})}},e91b:function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return l}));var a=s("b775");function r(){return Object(a["a"])({url:"/showAddresses",method:"get"})}function n(e){return Object(a["a"])({url:"/insertOneAddress",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/delOneAddress",method:"get",params:e})}}}]);